---
layout: single
title: 💼알쓸운영 - 남이만든시스템 극복하기
categories: SM
tag: [info]
toc: true
---

## 📚 1. 상황
모든 시스템이 완벽하게 돌아가면 좋겠지만 어디서건 예상하지 못하는 오류가 발생한다. 
해당 시스템을 내가 만들었거나 관리 문서가 완벽하다면 좋겠으나 그럴 확률은 거이 없다고 본다.

이런 경우 어떤식으로 원인을 파악해보는지 살펴보자.

---

## 2. 원인 파악 방법
문제를 파악하기 위해서 택하는 방법은 '소거법'이다.  
상황에 따라 우선순위는 바뀔 수 있다. 개인적으론 아래와 같은 순서를 많이 사용한다.

### 1) 데이터 문제인가? 

### 2) 어플리케이션 문제인가?

### 3) 인프라 문제인가?

### 4) 복합적인 문제인가?

이렇게만 순서만 보면 크게 와닿지 않기 때문에 실제 사례를 바탕으로 알아보자.

--- 

## 3. 사례를 바탕으로 확인
### 1) 댓글이 중복으로 보이는 현상

#### a. 실제로 데이터가 중복으로 들어가 있는지 확인한다.
#### b. 데이터가 중복이 아니라면 백엔드 API 결과값이 이중으로 반환되지 않는지 확인한다.
#### c. 결과값이 이중으로 반환되지 않으면 프론트단에서 데이터를 중복으로 보여주는지 확인한다.
> 반복적으로 발생한다면 인프라의 문제일 경우는 드물다.

#### d. 조금더 많은 조건으로 어플리케이션을 심층적으로 조사해본다. 로그나 E2E테스트에서 해당현상이 확인된다면 문제가 되는 값들의 파라미터를 확인해보자.

> 실제 해당사례는 시스템디자인 문제로 내림차순 데이터를 잘못된 기준으로 페이지처리하여 중복으로 보였던 것으로 해당문제는 따로 다뤄보려 한다.  
> [설계 : 내림차순](../systemdesign/systemdesign_내림차순.md)

### 2) 파일 업 다운로드가 완료되지 않는 현상
현재 회사에 있으면서 가장황당한 현상이었고 처음겪는 일이었다.

#### a. 어플리케이션 문제가 아는것을 증명한다. 로컬환경, 개발환경에서 검증시 문제여부를 식별한다.

#### b. 운영환경이 이중화 되어있었는데 운영에서만 해당현상이 발생하였다. 이럴경우 서버를 한대씩 테스트 해본다.

#### c. 웹서버로 확인 : IP의 80포트 확인

#### d. WAS 확인 : IP의 8080포트 확인

#### e. 이렇게 까지 했는데 문제가 없다면 이중화의 문제이거나 그 앞단의 문제이기에 어플리케이션 담당이 해결하긴 어려운 문제다.

#### f. 해당문제는 WAF의 문제였다.


---

## 4. 결론
이런 문제들은 잘 발생하지도 않지만 발생하면 쉽게 해결하기 어렵다. 하지만 위와 같이 하나씩 소거해가면 높은확률로 문제원인에 도달 할 수 있다.

> 일이 터지면 혼자 끙끙 앓지말고 동료와 직장선배분들과 함께 고민해보자. 