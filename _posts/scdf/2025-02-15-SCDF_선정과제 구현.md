---
layout: single
title: SCDF 선정 과제로 구현
categories: SCDF
tag: [SCDF]
toc: true
#author_profile: false
#sidebar:
#    nav: "docs"
---

> 팀 블로그용 원고

## 📌 검증된 기능

PoC를 통해 구현이 가능하다는 것을 검증하였습니다.

✅ 특정 action을 통해 stream을 시작하는 기능 (SOURCE-HTTP)  
✅ Stream Custom Application을 통해 JDBC 연결 후 DB Insert  
✅ 모니터링 (Grafana, Prometheus 연동)  
✅ Stream Custom Application을 Nexus를 통해 배포 및 관리

## 📌 추가 요청사항

PoC가 완료된 직후, 추가적인 요구사항이 접수되었습니다.

### 🔹 요구사항

✔ 연계 데이터를 여러 개의 DB에 적재해야 하며, 각 Sync 상태를 개별적으로 관리해야 함

- 예: 30개 그룹사 중 일부는 A Oracle DB, 일부는 B MySQL DB 등에 적재
- 테넌트별로 다른 데이터베이스를 선택적으로 사용

## 📌 확장성과 유지보수성을 고려한 설계 변경

추가 요청사항을 검토하면서, 기존 PoC에서 구현된 구조를 그대로 적용할 경우 **모든 로직이 하나의 배치 작업에 포함되어 유지보수와 확장이 어려울 것**이라는 문제가 예상되었습니다.
이에 따라 SCDF에서 제공하는 **속성(Properties) 기능**을 활용하여 **멀티테넌시(Multi-Tenancy)** 구조를 도입하기로 결정하였습니다.

<img src="/images/scdf/img.png" alt="" />
기본어플리케이션(http source) - properties

### 🔹 기존 AS-IS 구조 (데이터베이스별 개별 어플리케이션 구성)

각 데이터베이스마다 별도의 **HTTP Source → Processor → Finish** 어플리케이션이 필요하여 **중복 실행 및 운영 부담 증가**


```
+----------------------------+    +----------------------------+
|  oracle-HTTP Source(..n)   |    |  mysql-HTTP Source(..n)    |
+----------------------------+    +----------------------------+
          |                                     |
          v                                     v
+-----------------------------+   +-----------------------------+ 
|  oracle-file-sync-start(..n)|   |  mysql-file-sync-start(..n) |
+-----------------------------+   +-----------------------------+
          |                                       |
          v                                       v
+----------------------------------+  +----------------------------------+
|  oracle-file-sync-processor(..n) |  |  mysql-file-sync-processor(..n)  |
+----------------------------------+  +----------------------------------+
          |                                      |
          v                                      v
+------------------------------+  +------------------------------+
|  oracle-file-sync-finish(..n)|  |  mysql-file-sync-finish(..n) |
+------------------------------+  +------------------------------+
```
### 🔹 개선된 TO-BE 구조 (SCDF Destination과 Properties를 활용한 통합 어플리케이션 구성)
- SCDF의 Destination 기능을 활용하여 불필요한 개별 어플리케이션 실행 제거
- 파일 동기화 로직을 멀티테넌시 구조로 변경하여 유지보수성 개선 및 확장 가능성 확보
- 테넌트별로 별도의 데이터베이스 연결을 관리하면서도 동일한 어플리케이션을 활용할 수 있도록 최적화


```
+---------------------+
|  HTTP Source        |
+---------------------+
          | 
          v
+-------------------------+
| :file-sync-destinateion |
+-------------------------+


+-------------------------+
| :file-sync-destinateion |
+-------------------------+
          | 
          v
+------------------------------+
|  file-sync-start             |
|  properties : (mysql, oracle)|
+------------------------------+
          |
          v
+------------------------------+
|  file-sync-processor         |
|  properties : (mysql, oracle)|
+------------------------------+
          |
          v
+------------------------------+
|  file-sync-finish(..n)       |
|  properties : (mysql, oracle)|
+------------------------------+
```

## 📌 구현

✅ HTTP Source를 통해 데이터 수신 → 공통 Destination으로 전달  
✅ file-sync-start에서 테넌트 정보(Properties) 기반으로 적절한 DB 선택  
✅ file-sync-processor에서 CSV 데이터를 읽고 테넌트별 DB에 적재  
✅ file-sync-finish에서 동기화 완료 상태를 업데이트

## 📌 결론 및 기대 효과

### 🔹 결론

이번 PoC를 통해 SCDF의 Destination과 Properties 기능을 활용하여 멀티테넌시 구조를 효율적으로 적용할 수 있음을 검증하였습니다.
이를 통해 중복된 어플리케이션 실행을 줄이고, 유지보수성을 향상시키면서도 확장성을 확보할 수 있는 아키텍처를 구축하였습니다.

### 🔹 기대 효과

✅ 불필요한 애플리케이션 인스턴스 실행 제거 → 운영 효율성 증가  
✅ 테넌트별 데이터베이스 선택이 가능하면서도, 동일한 어플리케이션 활용 가능 → 유지보수 부담 감소  
✅ SCDF의 속성(Properties) 기능을 활용하여 향후 확장 가능성 확보

이번 구조 개선을 통해 향후 유사한 환경에서도 SCDF를 보다 유연하게 활용할 수 있는 기반을 마련하였습니다. 🚀