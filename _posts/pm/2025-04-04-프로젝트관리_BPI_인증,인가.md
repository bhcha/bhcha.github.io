---
layout: single
title: 🎯BPI 인증,인가(사례)
categories: PM
tag: [PM]
toc: true
---

현재 소속된 팀에서 기회를 만들어 내부 시스템에 대한 IdP를 만들고 있었다.
> 기회를 만들었다는 표현이 이상하겠지만 인사시스템을 통합하면서 IdP 프로젝트를 만들어 내서 만들어낸 기회가 맞다.

프로젝트를 진행하며 플로우를 정리중에 "이거 이렇게 해서는 안되겠는데?"라는 생각이 들었다. 단순히 개발만 해서 해결될것이 아니었고 개발외적인 것들도 같이 필요했다.    

절차와 규정부터 문제여서 확인을 해봤는데 회사에 인증, 인가에 대한 정책이 없다. 있긴한데 그룹사 전체 IT를 총괄함에 하나의 주 회사를 위해서만 작성된 보안지침 정도이다.

아무도 지키지 않고 있었고 새로운 프로젝트들을 하는 사람들조차 있는지 모르는 상태였다.


## 문제점
- 보안지침이 있으나 실정에 맞지 않음  
   - 그룹사간 겸직이 많고 회사별로 급여가 나가는 경우가 있어 인사시스템에 다계정을 가진 사람들이 있으나 보안지침에는 1인 1계정을 말하고 있다.
   - 권한 회수 기준이 있긴한데 퇴사시에만 적용(팀코드가 유지된채로 다른 사업부로 가는 경우들도 있는 상황)


- 헛점 투성이의 기술부채  
   - SSO라고 말을 하지만 실상은 IdP가 다르다는 이유로 인증이 따로 되는 영역이 있어 암호화된 아이디를 복호화 하면 인증이 되는 위험한 구조
   - 위 구조가 당연하다는듯 반복되는 신규 프로젝트
   - 당연히 Saas서비스엔 SSO가 안되는 구조


- 그룹사 내부시스템의 조직, 인사 데이터 기준이 상이함  
   - 어떤 시스템은 SAP의 조직과 인사 정보, 어떤 시스템은 그룹웨어의 조직과 인사 정보
   - 문제는 그룹사간 인사시스템이 4개 
  

> 가장 큰 문제는 지키지 않아도 되고 아무도 관심이 없다는것

## 분석

위 문제는 1~2년에 걸쳐 해결될 사안이 아니었다. 개발팀만으로는 해결할 수 없었기에 보안팀에 문의해 기존 보안지침을 받았다.  
하지만 그 지침은 해당 회사만을 위해 작성된 기본적인 수준이었기에, 내부 시스템의 인증 및 인가 방식에 대해 다시 한 번 요구사항을 도출해야 했다.

## 진단

비록 보안 전문가가 아니었지만, 수많은 내부 시스템의 인증, 인가를 하면서 축적된 케이스와 기존 보안지침을 리버스 엔지니어링하듯 분석했다.  
그 결과, 내부 시스템들의 인증 및 인가 프로세스와 보안지침의 요구사항을 바탕으로 개선 요구사항 목록을 작성했다.
<img src="/images/pm/img.png">

## 설계

분석 및 진단 결과를 바탕으로, 계정 관리, 권한 부여, 인가 프로세스 전반에 대해 개선 설계안을 마련했다.  
예를 들어,
- **계정 관리**에서는 1인 1계정 원칙을 재검토하고 외부 협력사 계정 관리 방식을 보완했다.
- **권한 관리**에서는 최소 권한 원칙(PoLP)과 역할 분리(SoD)를 강화했다.
- **인가 처리**에서는 RBAC, ABAC 등 다양한 접근 제어 모델을 도입하는 방안을 설계했다.
- 해당 작업들이 임의 작업이 되지 않게 하기 위해 보안 지침을 분석하여 근거 자료로 사용하였다.  

<img src="/images/pm/img_1.png">

## 실행

실행에 옮기기 위해 보안, 전략, 기획 등에 보안적인 문제와 기술부채들에 대해 공감대를 만들어 가며 지금 우리는 이렇게 하고 있고 이런 안들을 제안 하였다. 그 과정에서 피해보는 부서가 없게 하기위해 아래와 같은 미사여구도 포함하였다.  
<img src="/images/pm/img_2.png">

더 쉽게 이해시키기 위해 아애 인증에 대한 플로우를 그렸다.
<img src="/images/pm/img_3.png">

이후 공감대가 형성되었고 우리 팀의 진행방향이 맞을을 확인한후 경영진에게 이런걸 진행하고 있고 이렇게 좋아질것임을 보고하였다.



## 평가 및 반복
현재 프로젝트 막바지 진행중이며 4월 말 오픈 예정이다 보니 평가 및 반복 단계는 아니다. 조금 성급하게 해당 포스팅을 작성한감이 있으나 요즘 머리속에 가장 높은 비중을 차지한 내용이라 작성하게 되었다.